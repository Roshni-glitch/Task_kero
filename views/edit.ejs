<% layout("./layouts/layout.ejs") %>
<%- include("./includes/navbar.ejs") %>

<link rel="stylesheet" href="/css/navbar.css">
<link rel="stylesheet" href="/css/edit.css">    

<body>
    <div class="form-container">
        <h2>EDIT TASK</h2>
        <form action="/tasks/<%= task._id %>?_method=PUT" method="POST">
            
            <div class="form-group">
                <label for="title">Title:</label>
                <input type="text" id="title" name="title" value="<%= task.title %>" required>
            </div>

            <div class="form-group">
                <label for="description">Description:</label>
                <textarea id="description" name="description"><%= task.description %></textarea>
            </div>

            <div class="form-group">
                <label for="status">Status:</label>
                <select id="status" name="status" required>
                    <option value="Pending" <%= task.status === "Pending" ? "selected" : "" %>>Pending</option>
                    <option value="In Progress" <%= task.status === "In Progress" ? "selected" : "" %>>In Progress</option>
                    <option value="Completed" <%= task.status === "Completed" ? "selected" : "" %>>Completed</option>
                </select>
            </div>

            <div class="form-group">
                <label for="priority">Priority:</label>
                <select id="priority" name="priority" required>
                    <option value="Low" <%= task.priority === "Low" ? "selected" : "" %>>Low</option>
                    <option value="Medium" <%= task.priority === "Medium" ? "selected" : ""  %>>Medium</option>
                    <option value="High" <%= task.priority === "High" ? "selected" : "" %>>High</option>
                </select>
            </div>

            <div class="form-group">
                <label for="dueDate">Due Date:</label>
                <input type="date" id="dueDate" name="dueDate" value="<%= task.dueDate ? task.dueDate.toISOString().split('T')[0] : '' %>" required>
            </div>

            <button type="submit">Update Task</button>
        </form>
    </div>
</body>
</html>
